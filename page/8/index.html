<!DOCTYPE html>


<html lang="en" >


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Hexo
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

  <script type="text/javascript"
	src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
</head>

</html>

<body>
  <div id="app">
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Hexo</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-视觉第1讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC1%E8%AE%B2/"
    >视觉第1讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC1%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.915Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="滤波器"><a class="markdownIt-Anchor" href="#滤波器"></a> 滤波器</h1>
<ol>
<li><strong>滤波</strong>：形成一个新的图像，其像素是原始像素的组合。</li>
<li>用途：
<ol>
<li>提取边缘或轮廓</li>
<li>消除噪音</li>
<li>锐化和增强形象</li>
</ol>
</li>
</ol>
<h1 id="线性滤波"><a class="markdownIt-Anchor" href="#线性滤波"></a> 线性滤波</h1>
<ol>
<li>线性滤波：用相邻的线性组合(加权和)替换每个像素</li>
</ol>
<p>–&gt;互相关，卷积</p>
<h2 id="相关"><a class="markdownIt-Anchor" href="#相关"></a> 相关</h2>
<img src="/视觉_img/1-1.png" style="zoom:1%">
<ol>
<li>将图像记为,以H表示权重核（大小为(2K+1)x(2K+1)),并记G为输出图像</li>
<li>G=H×F</li>
</ol>
<h2 id="卷积"><a class="markdownIt-Anchor" href="#卷积"></a> 卷积</h2>
<img src="/视觉_img/1-2.png" style="zoom:1%">
<ol>
<li>与相关相同，只是将权重核在水平和竖直方向翻转。</li>
<li>妈祖交换律、分配律和结合律</li>
</ol>
<h2 id="平均滤波"><a class="markdownIt-Anchor" href="#平均滤波"></a> 平均滤波</h2>
<ol>
<li>H 全为1/k，其中k为权重核边长。</li>
</ol>
<h2 id="锐化-增强图像-平均滤波"><a class="markdownIt-Anchor" href="#锐化-增强图像-平均滤波"></a> 锐化 = 增强图像-平均滤波</h2>
<img src="/视觉_img/1-3.png" style="zoom:1%">
<img src="/视觉_img/1-5.png" style="zoom:1%">
<h2 id="高斯滤波"><a class="markdownIt-Anchor" href="#高斯滤波"></a> 高斯滤波</h2>
<ol>
<li>
<p>高斯核</p>
 <img src="/视觉_img/1-4.png" style="zoom:1%">
<ol>
<li>σ作用：σ越大，带通越大，高斯核函数的局部影响的范围就越大。中心亮点也越大，卷积后的图像越模糊。</li>
</ol>
</li>
<li>
<p>高斯滤波器（低通滤波器）</p>
<ol>
<li>用宽度为σ的核卷积两次=以宽度为√2σ的核卷积一次。</li>
</ol>
</li>
</ol>
<h2 id="阈值滤波器"><a class="markdownIt-Anchor" href="#阈值滤波器"></a> 阈值滤波器</h2>
<p><strong>不是线性滤波器</strong></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第19讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC19%E8%AE%B2/"
    >视觉第19讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC19%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.912Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="图像识别"><a class="markdownIt-Anchor" href="#图像识别"></a> 图像识别</h1>
<ol>
<li>简单匹配存在的问题：
<ol>
<li>遮挡，视角的变化</li>
<li>类内的变化</li>
<li>照明变化</li>
<li>变形</li>
<li>背景杂乱</li>
</ol>
</li>
<li>没有明确的解</li>
</ol>
<h1 id="数据驱动的方法"><a class="markdownIt-Anchor" href="#数据驱动的方法"></a> 数据驱动的方法</h1>
<img src="/视觉_img/19-1.png">
<ol>
<li>收集带有标签的图像数据库</li>
<li>使用机器学习算法训练图像分类器</li>
<li>用测试图像评估分类器的效果</li>
</ol>
<h2 id="线性分类器"><a class="markdownIt-Anchor" href="#线性分类器"></a> 线性分类器</h2>
<p>要做</p>
<ol>
<li>定义一个损失函数：在训练集上评估我们对分类分数的不满意程度</li>
<li>优化方法：求解参数的方法，以最小化损失函数</li>
</ol>
<h3 id="评分函数-原始数据到类分数"><a class="markdownIt-Anchor" href="#评分函数-原始数据到类分数"></a> 评分函数 原始数据到类分数</h3>
<img src="/视觉_img/19-2.png">
<ol>
<li>要将图像拉成列向量</li>
<li>偏执向量可归到权重向量中</li>
</ol>
<h3 id="损失函数-预测分数与实际标签的一致性"><a class="markdownIt-Anchor" href="#损失函数-预测分数与实际标签的一致性"></a> 损失函数 预测分数与实际标签的一致性</h3>
<img src="/视觉_img/19-3.png">
<ol>
<li>其中yi为真实标签</li>
<li>目标是通过训练找到最小化损失函数的参数W(评分函数中的权)</li>
</ol>
<h2 id="softmax分类"><a class="markdownIt-Anchor" href="#softmax分类"></a> Softmax分类</h2>
<p>由于分数不直观，所以将分数归一化得到概率分布。推广逻辑斯蒂回归将分数转到(0,1)。</p>
<img src="/视觉_img/19-4.png">
<img src="/视觉_img/19-5.png">
<ol>
<li>分数转到(0,1)</li>
<li>Li只对真实标签计算，取值[0,∞]。S=0时，Li=logN</li>
<li>注意Li的负号</li>
</ol>
<h3 id="交叉熵损失"><a class="markdownIt-Anchor" href="#交叉熵损失"></a> 交叉熵损失</h3>
<ol>
<li>
<img src="/视觉_img/19-6.png">
</li>
<li>Softmax分类器目标是最小化交叉熵</li>
</ol>
<h3 id="kl-散度-相对熵"><a class="markdownIt-Anchor" href="#kl-散度-相对熵"></a> KL 散度 相对熵</h3>
<img src="/视觉_img/19-7.png">
<ol>
<li>描述p与q之间的差异</li>
<li>非负</li>
</ol>
<h3 id="正则化"><a class="markdownIt-Anchor" href="#正则化"></a> 正则化</h3>
<img src="/视觉_img/19-8.png">
<img src="/视觉_img/19-13.png">
<ol>
<li>使模型更加简单，增强其泛化能力</li>
<li>使权重均匀</li>
<li>避免过拟合，避免拟合噪声，增强泛化能力</li>
</ol>
<h2 id="设置权重的方法"><a class="markdownIt-Anchor" href="#设置权重的方法"></a> 设置权重的方法</h2>
<h3 id="随机搜索"><a class="markdownIt-Anchor" href="#随机搜索"></a> 随机搜索</h3>
<h3 id="随机梯度下降"><a class="markdownIt-Anchor" href="#随机梯度下降"></a> 随机梯度下降</h3>
<p>跟随斜坡(沿梯度反方向进发)</p>
<img src="/视觉_img/19-9.png">
<p>𝛻<sub>w</sub>L = W-α𝛻<sub>w</sub>L</p>
<ol>
<li>
<p>对于一维函数，梯度即导数。对于多维函数，梯度是沿各维的偏导数。</p>
</li>
<li>
<p>某个方向上的斜率是该方向与梯度的点积。</p>
</li>
<li>
<p>两向量方向相同时，点积模长最大。所以下降最快速的方向是负梯度方向。</p>
</li>
<li>
<p>α为学习率：太大会错过最低点，太小收敛速度慢。</p>
</li>
<li>
<p>数值解求法 速度慢</p>
 <img src="/视觉_img/19-10.png">
 <img src="/视觉_img/19-11.png">
 <img src="/视觉_img/19-12.png">
<p>近似、速度慢、容易编程</p>
</li>
<li>
<p><strong>解析解求法</strong>(梯度检查) 用微积分来求</p>
 <img src="/视觉_img/19-14.png">
<p>精确、快速、容易出错</p>
</li>
</ol>
<h3 id="批量梯度下降"><a class="markdownIt-Anchor" href="#批量梯度下降"></a> 批量梯度下降</h3>
<img src="/视觉_img/19-15.png">
<h3 id="动量项"><a class="markdownIt-Anchor" href="#动量项"></a> 动量项</h3>
<img src="/视觉_img/19-16.png">
<p>使得梯度变换平缓一些</p>
<h1 id="图像特征分类"><a class="markdownIt-Anchor" href="#图像特征分类"></a> 图像特征分类</h1>
<p>方法</p>
<ol>
<li>建立颜色直方图</li>
<li>建立梯度直方图</li>
<li>建立词袋</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第18讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC18%E8%AE%B2/"
    >视觉第18讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC18%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.909Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="光度测量立体视觉"><a class="markdownIt-Anchor" href="#光度测量立体视觉"></a> 光度测量立体视觉</h1>
<p>基于<strong>朗伯漫反射</strong></p>
<h2 id="步骤"><a class="markdownIt-Anchor" href="#步骤"></a> 步骤</h2>
<h3 id="求光照方向"><a class="markdownIt-Anchor" href="#求光照方向"></a> 求光照方向</h3>
<p>利用铬球的镜面反射</p>
<img src="/视觉_img/18-2.png">
### 求法线方向
<p>假设已知三个点</p>
<ol>
<li>
<img src="/视觉_img/18-3.png">
</li>
<li>
<p>写成矩阵形式</p>
</li>
<li>
 <img src="/视觉_img/18-4.png">
</li>
<li>
<p>求解N</p>
 <img src="/视觉_img/18-5.png">
</li>
<li>
<p>对每个像素求解可以获得该像素的表面法线方向</p>
</li>
<li>
<p>超过三个光源<br />
<img src="/视觉_img/18-1.png"></p>
</li>
</ol>
<h3 id="从法线计算深度泊松方程"><a class="markdownIt-Anchor" href="#从法线计算深度泊松方程"></a> 从法线计算深度(泊松方程)</h3>
<p>将相邻的连个点的连线看成是曲面的切面向量，那么这条线与法线垂直。</p>
<img src="/视觉_img/18-6.png">
<h3 id="局限性"><a class="markdownIt-Anchor" href="#局限性"></a> 局限性</h3>
<p>对于有反射，折射，阴影等情况不起效</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第17讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC17%E8%AE%B2/"
    >视觉第17讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC17%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.906Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="光"><a class="markdownIt-Anchor" href="#光"></a> 光</h1>
<h2 id="辐射"><a class="markdownIt-Anchor" href="#辐射"></a> 辐射</h2>
<ol>
<li>像素亮度决定因素
<ol>
<li>光源属性</li>
<li>表面特性</li>
</ol>
</li>
</ol>
<h2 id="光谱"><a class="markdownIt-Anchor" href="#光谱"></a> 光谱</h2>
<p>可见光为400nm-700nm的电磁辐射</p>
<h2 id="颜色知觉"><a class="markdownIt-Anchor" href="#颜色知觉"></a> 颜色知觉</h2>
<img src="/视觉_img/17-1.png">
<img src="/视觉_img/17-2.png">
<ol>
<li>视锥细胞和视杆细胞在光谱上充当滤波器。</li>
</ol>
<h2 id="亮度对比度和恒常"><a class="markdownIt-Anchor" href="#亮度对比度和恒常"></a> 亮度对比度和恒常</h2>
<ol>
<li>亮度对比度：恒定的有色区域根据周围的强度看起来更亮或更暗。</li>
<li>明度恒常性：当照明条件改变时，人知觉到的物体的相对明度保持不变。</li>
</ol>
<h2 id="光照"><a class="markdownIt-Anchor" href="#光照"></a> 光照</h2>
<h3 id="定向照明"><a class="markdownIt-Anchor" href="#定向照明"></a> 定向照明：</h3>
<ol>
<li>所有射线都是平行的</li>
<li>等价于无穷远的点光源</li>
</ol>
<h3 id="漫反射"><a class="markdownIt-Anchor" href="#漫反射"></a> 漫反射</h3>
<img src="/视觉_img/17-3.png">
<p>I = N·L</p>
<ol>
<li>漫反射反射到各个角度得到的光强一样，与视角无关</li>
<li>正比于夹角余弦</li>
</ol>
<h3 id="三种材料"><a class="markdownIt-Anchor" href="#三种材料"></a> 三种材料</h3>
<ol>
<li>理想漫反射：哑光表面</li>
<li></li>
</ol>
<h1 id="图像形成模型"><a class="markdownIt-Anchor" href="#图像形成模型"></a> 图像形成模型</h1>
<img src="/视觉_img/17-4.png">
<h2 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h2>
<ol>
<li>Kd：表示入射光反射的比例</li>
<li>I：光强度，表示有多少光射进来</li>
<li>相机相应函数：假设像素值与传入光的能量成线性比例关系。</li>
</ol>
<h2 id="用途"><a class="markdownIt-Anchor" href="#用途"></a> 用途</h2>
<p>测量光的方向以辨别真假照片。</p>
<p>需要增加假设</p>
<ol>
<li>反照率恒定</li>
<li>已知一些法线</li>
<li>已知法线的平滑度</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第16讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC16%E8%AE%B2/"
    >视觉第16讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC16%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.904Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="立体视觉"><a class="markdownIt-Anchor" href="#立体视觉"></a> 立体视觉</h1>
<p>通过多个角度拍摄的标定过 的图像，进行3D对象建模。###</p>
<h1 id="多视图立体视觉"><a class="markdownIt-Anchor" href="#多视图立体视觉"></a> 多视图立体视觉</h1>
<ol>
<li>需要多视图原因
<ol>
<li>可能有某些区域的特写</li>
<li>某些表面在某些视图中缩小了</li>
<li>某些点可能在某些视图中完全消失。</li>
<li>多次测量同一个点可以减小误差。</li>
</ol>
</li>
</ol>
<h1 id="多基线立体视觉"><a class="markdownIt-Anchor" href="#多基线立体视觉"></a> 多基线立体视觉</h1>
<p>将几台相机矫正到同一共同平面上。可能有宽基线和扭曲问题。</p>
<h2 id="选择立体视图基线"><a class="markdownIt-Anchor" href="#选择立体视图基线"></a> 选择立体视图基线</h2>
<img src="/视觉_img/16-1.png" height="5%" width="%5">
<img src="/视觉_img/16-2.png" height="5%" width="%5">
<ol>
<li>基线太小导致深度误差大</li>
<li>基线太大大致搜索范围大，计算复杂度提高。</li>
</ol>
<h2 id="基本方法"><a class="markdownIt-Anchor" href="#基本方法"></a> 基本方法</h2>
<ol>
<li>选择参考视图</li>
<li>使用立体视图算法，但将其中双视图SSD换成SSSD(SUM SSD)</li>
</ol>
<h3 id="限制"><a class="markdownIt-Anchor" href="#限制"></a> 限制</h3>
<ol>
<li>只能给出深度图，不能给出对象模型</li>
<li>不适用于广泛分布的视图</li>
</ol>
<h1 id="照片一致性评分"><a class="markdownIt-Anchor" href="#照片一致性评分"></a> 照片一致性评分</h1>
<h2 id="衡量函数"><a class="markdownIt-Anchor" href="#衡量函数"></a> 衡量函数</h2>
<ol>
<li>
<p>SSD</p>
 <img src="/视觉_img/16-3.png" height="5%" width="%5">
</li>
<li>
<p>SAD</p>
 <img src="/视觉_img/16-4.png" height="5%" width="%5">
</li>
<li>
<p>ZNCC</p>
 <img src="/视觉_img/16-5.png" height="5%" width="%5">
</li>
</ol>
<h1 id="平面扫描立体视觉"><a class="markdownIt-Anchor" href="#平面扫描立体视觉"></a> 平面扫描立体视觉</h1>
<h2 id="基础"><a class="markdownIt-Anchor" href="#基础"></a> 基础</h2>
<img src="/视觉_img/16-6.png" height="5%" width="%5">
<ol>
<li>
<p>相机1系即世界坐标系，相机1为参考相机</p>
</li>
<li>
<p>深度平面</p>
 <img src="/视觉_img/16-7.png" height="5%" width="%5">
<ol>
<li>其中n<sub>m</sub>为深度平面的法向量</li>
<li>平面表示为ax+by+cz+d=0</li>
<li>点到平面距离dm=√a<sup>2</sup>+b<sup>2</sup>+c<sup>2</sup>?</li>
</ol>
</li>
<li>
<p>从参考相机Pref映射到深度平<br />
面Πm，再映射到相机Pk的单应<br />
映射为</p>
 <img src="/视觉_img/16-8.png" height="5%" width="%5">
</li>
</ol>
<h2 id="过程"><a class="markdownIt-Anchor" href="#过程"></a> 过程</h2>
<img src="/视觉_img/16-9.png" height="5%" width="%5">
<h3 id="参考平面"><a class="markdownIt-Anchor" href="#参考平面"></a> 参考平面</h3>
<ol>
<li>
<p>与成像平面平行<br />
<img src="/视觉_img/16-10.png" height="5%" width="%5"></p>
</li>
<li>
<p>其他方向</p>
 <img src="/视觉_img/16-11.png" height="5%" width="%5">
</li>
</ol>
<h1 id="深度图融合"><a class="markdownIt-Anchor" href="#深度图融合"></a> 深度图融合</h1>
<p>方法</p>
<ol>
<li>使用多基线方法计算一个深度图</li>
<li>体积融合</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第15讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC15%E8%AE%B2/"
    >视觉第15讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC15%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.901Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="运动恢复结构-sfm"><a class="markdownIt-Anchor" href="#运动恢复结构-sfm"></a> 运动恢复结构 SFM</h1>
<ol>
<li>目的：输入一对匹配点的图像坐标，输出这个点的三维坐标及相机内外参数(可能的话)。同时使得目标函数具有最小化重投影误差。</li>
<li>过程：
<ol>
<li>特征检测与匹配</li>
<li>匹配每对图像之间的特征</li>
<li>用 RANSAC 优化匹配以估计各对之间的基本矩阵</li>
</ol>
</li>
</ol>
<h2 id="目标函数"><a class="markdownIt-Anchor" href="#目标函数"></a> 目标函数</h2>
<img src="/视觉_img/15-1.png" style="zoom:80%">
<ol>
<li>目标是使重投影误差平方和最小</li>
<li>P(xi,Rj,tj)表示把Xi这个点投影到第j个相机。</li>
<li>Wij：=1代表三维点在图像中出现了；=0代表没出现。</li>
<li>解不唯一。</li>
</ol>
<h2 id="重复结构问题的解决"><a class="markdownIt-Anchor" href="#重复结构问题的解决"></a> 重复结构问题的解决</h2>
<ol>
<li>预处理：删除不一致的场景图边缘</li>
<li>后处理：识别和更正重复的结构</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第14讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC14%E8%AE%B2/"
    >视觉第14讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC14%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.898Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="极线"><a class="markdownIt-Anchor" href="#极线"></a> 极线</h1>
<img src="/视觉_img/14_2.png" style="zoom:1%">
<ol>
<li>极线：极面与成像平面的交线</li>
</ol>
<h1 id="基本矩阵"><a class="markdownIt-Anchor" href="#基本矩阵"></a> 基本矩阵</h1>
<h2 id="基本矩阵性质"><a class="markdownIt-Anchor" href="#基本矩阵性质"></a> 基本矩阵性质</h2>
<ol>
<li>F将图像1中的点映射到图像2中的极线</li>
<li>Fp是与p对应的极线</li>
<li>F<sup>T</sup>q是与q对应的极线</li>
<li>Fe1=0，F<sup>T</sup>e2=0
<ol>
<li><strong>证明</strong> 比如极线恒过e1，则对于任意的q，e1<sup>T</sup>F1<sup>T</sup>q=0，则e1<sup>T</sup>F1<sup>T</sup>=0</li>
</ol>
</li>
<li>F的秩是2，行列式为0</li>
<li>点p在图2中的极线是:Fp</li>
<li>对应点间<strong>极线约束</strong>为q<sup>T</sup>Fp=0,即匹配点必须在极线上</li>
<li>特殊点e1和e2(极点)：是相机在另一个相机成像平面上的投影。(两个相机互相拍照)</li>
<li>所有极线都通过极点</li>
</ol>
<h2 id="求解基本矩阵-已标定时"><a class="markdownIt-Anchor" href="#求解基本矩阵-已标定时"></a> 求解基本矩阵-已标定时</h2>
<img src="/视觉_img/14_3.png" style="zoom:1%">	
<p>其中</p>
<ol>
<li>ot为baseline</li>
<li>相机1坐标系即世界坐标系</li>
<li>p,q为齐次坐标</li>
<li>旋转矩阵R<sup>-1</sup>=R<sup>T</sup><br />
<img src="/视觉_img/14_4.png" style="zoom:1%"></li>
</ol>
<img src="/视觉_img/14_5.png" style="zoom:1%">
<ol start="3">
<li>与t的叉积可表示为</li>
</ol>
<img src="/视觉_img/14_6.png" style="zoom:1%">
<img src="/视觉_img/14_7.png" style="zoom:1%">
<ol start="4">
<li>求得本质矩阵E</li>
</ol>
<img src="/视觉_img/14_8.png" style="zoom:1%">
<ol start="5">
<li>求得基本矩阵F</li>
</ol>
<img src="/视觉_img/14_9.png" style="zoom:1%">	
<h2 id="估计基本矩阵"><a class="markdownIt-Anchor" href="#估计基本矩阵"></a> 估计基本矩阵</h2>
<p>在不知道K1,K2,R或t的情况下估计F</p>
<h3 id="8点算法"><a class="markdownIt-Anchor" href="#8点算法"></a> 8点算法</h3>
<ol>
<li>
<p>求解思路<br />
对于每对匹配点，由x’<sup>T</sup>Fx=0</p>
 <img src="/视觉_img/14_10.png" style="zoom:1%">	
<p>将问题转换成求解让det(Af)最小化的f,其解为A<sup>T</sup>A的最小特征向量。</p>
</li>
<li>
<p>问题</p>
<ol>
<li>不能保证F的秩是2</li>
</ol>
</li>
<li>
<p>解决</p>
<ol>
<li>因此应将F换成F’，F’的秩为2，且是|F-F’|最小化</li>
</ol>
 <img src="/视觉_img/14_11.png" style="zoom:1%">
</li>
<li>
<p>8点算法：</p>
<ol>
<li><strong>优点</strong> 是线性的，易于实现且速度快</li>
<li><strong>缺点</strong> 易受噪声影响，当各列间数量级差别较大的时候，最小二乘法得到不良解。</li>
</ol>
</li>
</ol>
<h2 id="归一化的8点算法"><a class="markdownIt-Anchor" href="#归一化的8点算法"></a> 归一化的8点算法</h2>
<p>将图像变换到[-1,1]×[-1,1]</p>
<img src="/视觉_img/14_12.png" style="zoom:1%">
<img src="/视觉_img/14_13.png" style="zoom:1%">
<p>其中T为归一化矩阵</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第13讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC13%E8%AE%B2/"
    >视觉第13讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC13%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.895Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="极几何"><a class="markdownIt-Anchor" href="#极几何"></a> 极几何</h1>
<h2 id="基本的立体图算法"><a class="markdownIt-Anchor" href="#基本的立体图算法"></a> 基本的立体图算法</h2>
<img src="/视觉_img/13_1.png" style="zoom:1%">
<p>对于左图中每个像素，在右图同一个极线上选择最小匹配成本的像素。</p>
<ol>
<li>用SSD衡量成本</li>
<li>匹配窗口：大窗口粒度粗，小窗口更加精细，但是噪声多。</li>
</ol>
<h2 id="能量最小化求解立体视觉"><a class="markdownIt-Anchor" href="#能量最小化求解立体视觉"></a> 能量最小化求解立体视觉</h2>
<ol>
<li>目标
<ol>
<li>匹配质量：希望每个像素在其他图像中找到一个好的匹配项</li>
<li>平滑：如果两个像素相邻，他们的应该平移大约相同的量</li>
</ol>
</li>
</ol>
<h3 id="贪心匹配"><a class="markdownIt-Anchor" href="#贪心匹配"></a> 贪心匹配</h3>
<ol start="2">
<li>
<p>定义能量函数E(d)</p>
 <img src="/视觉_img/13_2.png" style="zoom:1%">
<ol>
<li>现在要找一个平移量映射D，最大限度的减少一个能量函数E(d)</li>
<li>独立的选择每一列的最小值d(x,y)=argmin C(x,y,d’)</li>
</ol>
</li>
</ol>
<h3 id="改进目标函数"><a class="markdownIt-Anchor" href="#改进目标函数"></a> 改进目标函数</h3>
<img src="/视觉_img/13_3.png" style="zoom:1%">
<p>其中</p>
<img src="/视觉_img/13_4.png" style="zoom:1%">
<p>对于平滑成本，v的选择很多</p>
<img src="/视觉_img/13_5.png" style="zoom:1%">
<ol>
<li>
<p>一维动态规划</p>
<ol>
<li>
<p>对每条扫描线使用动态规划方法独立求解</p>
</li>
<li>
<p>以增量方式构建成本函数D</p>
 <img src="/视觉_img/13_6.png" style="zoom:1%">
</li>
</ol>
</li>
<li>
<p>二维动态规划</p>
 <img src="/视觉_img/13_7.png" style="zoom:1%">
<ol>
<li>不能用二维动态规划求解，因为dx,y-1和 dx-1,y可能取决于 dx-1,y-1 的不同值</li>
<li>2D有许多局部极小值</li>
<li>以及一个大的搜索群空间</li>
<li>好的方法是马尔可夫随机场</li>
</ol>
</li>
</ol>
<h1 id="通过视差求深度"><a class="markdownIt-Anchor" href="#通过视差求深度"></a> 通过视差求深度</h1>
<img src="/视觉_img/13_8.png" style="zoom:1%">
<ol>
<li>baseline 极线，平行于成像平面</li>
<li>X是物体</li>
<li>x和x’是向量</li>
<li>(baseline-(x-x’))/baseline=z-f/z</li>
<li>z为深度</li>
</ol>
<h1 id="立体重建"><a class="markdownIt-Anchor" href="#立体重建"></a> 立体重建</h1>
<h2 id="过程"><a class="markdownIt-Anchor" href="#过程"></a> 过程</h2>
<ol>
<li>标定摄像机：标定内外参数</li>
<li>校正图像：将两个图像放到同一个平面上，且平行于baseline</li>
<li>计算平移量</li>
<li>估计深度</li>
</ol>
<h2 id="由结构光主动获得立体图"><a class="markdownIt-Anchor" href="#由结构光主动获得立体图"></a> 由结构光主动获得立体图</h2>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第12讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC12%E8%AE%B2/"
    >视觉第12讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC12%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.893Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="点和线"><a class="markdownIt-Anchor" href="#点和线"></a> 点和线</h1>
<h2 id="点和线的对偶性"><a class="markdownIt-Anchor" href="#点和线的对偶性"></a> 点和线的对偶性</h2>
<img src="/视觉_img/12_1.png" style="zoom:70%">
<ol>
<li>对于线上的每一点P,有I·P=0	（面上一点同理）</li>
<li>由射线P1和P2决定的线I,有I=P1×P2</li>
<li>两条线I1和I2的交点P，有P=I1×I2</li>
</ol>
<h2 id="理想的点和线"><a class="markdownIt-Anchor" href="#理想的点和线"></a> 理想的点和线</h2>
<img src="/视觉_img/12_2.png" style="zoom:70%">
<ol>
<li>
<p>理想点（无穷远点）</p>
<ol>
<li>P(x,y,0)平行于图像平面</li>
<li>有无限的图像坐标</li>
</ol>
</li>
<li>
<p>理想线</p>
<ol>
<li>I(a,b,0)平行于图像平面</li>
<li>对应于图像平面过主点的一条线</li>
<li>由ax+by=0组成的线</li>
</ol>
</li>
</ol>
<h2 id="面和点的对偶性"><a class="markdownIt-Anchor" href="#面和点的对偶性"></a> 面和点的对偶性</h2>
<ol>
<li>一个平面可以用四维向量表示</li>
<li>点和平面是对偶的：N·P=0</li>
<li>三点定义一个平面，三个平面定义一个点</li>
</ol>
<h1 id="透视投影"><a class="markdownIt-Anchor" href="#透视投影"></a> 透视投影</h1>
<img src="/视觉_img/12_3.png" style="zoom:40%">
<h2 id="消失点-1d"><a class="markdownIt-Anchor" href="#消失点-1d"></a> 消失点 1D</h2>
<img src="/视觉_img/12_4.png" style="zoom:40%">
<ol>
<li>消失点：
<ol>
<li>是无穷处一个点的投影</li>
<li>通常投影到图像中的一个有限点</li>
</ol>
</li>
</ol>
<h2 id="消失点-2d"><a class="markdownIt-Anchor" href="#消失点-2d"></a> 消失点 2D</h2>
<img src="/视觉_img/12_5.png" style="zoom:40%">
## 消失点 3D
<img src="/视觉_img/12_6.png" style="zoom:40%">
<ol>
<li>特性
<ol>
<li>任意两条平行线都有相同的消失点V</li>
<li>从光心C通过消失点V的射线与那些平行线平行</li>
<li>图像可能有多个消失点</li>
</ol>
</li>
</ol>
<h2 id="消失线"><a class="markdownIt-Anchor" href="#消失线"></a> 消失线</h2>
<img src="/视觉_img/12_7.png" style="zoom:40%">
<ol>
<li>平面上任意一组平行线都定义一个消失点</li>
<li>消失点的联合就是消失线(地平线)</li>
<li>不同平面可以定义不同的消失线</li>
</ol>
<h2 id="计算消失点"><a class="markdownIt-Anchor" href="#计算消失点"></a> 计算消失点</h2>
<img src="/视觉_img/12_8.png" style="zoom:40%">
<p>v = ΠP<sub>∞</sub></p>
<ol>
<li>
<p>解释：</p>
<ol>
<li>先得到一条射线Px，其中t是一个自由变化的系数，D是方向向量</li>
<li>将t-&gt;∞代入，得到P<sub>∞</sub></li>
<li>将P<sub>∞</sub>投影到成像平面</li>
</ol>
</li>
<li>
<p>特性：</p>
<ol>
<li>P<sub>∞</sub> 是无穷远处的一个点，v是其投影</li>
<li>仅取决于线的方向</li>
<li>平行线P<sub>0</sub>+tD和P<sub>1</sub>+tD相交于P<sub>∞</sub></li>
</ol>
</li>
<li>
<img src="/视觉_img/12_10.png" style="zoom:40%">
</li>
</ol>
<h2 id="计算消失线"><a class="markdownIt-Anchor" href="#计算消失线"></a> 计算消失线</h2>
<img src="/视觉_img/12_9.png" style="zoom:40%">
<p>作平行于地面平面且过C的平面与投影平面的交线。</p>
<ol>
<li>特性
<ol>
<li>I是通过C的水平平面与图像平面的交集</li>
<li>可以通过地面平面上的两组平行线计算I</li>
<li>所有与光心C同样高度的点投影到I上</li>
<li>提供了比较场景中对象高度的方法</li>
</ol>
</li>
</ol>
<h1 id="通过参照物测量高度"><a class="markdownIt-Anchor" href="#通过参照物测量高度"></a> 通过参照物测量高度</h1>
<ol>
<li>
<p>交叉比—射影不变量</p>
 <img src="/视觉_img/12_11.png" style="zoom:40%">
</li>
<li>
<p>测量高度</p>
 <img src="/视觉_img/12_12.png" style="zoom:40%">
</li>
<li>
<p>实际</p>
 <img src="/视觉_img/12_13.png" style="zoom:40%"></li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第11讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC11%E8%AE%B2/"
    >视觉第11讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC11%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.890Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="创建全景图"><a class="markdownIt-Anchor" href="#创建全景图"></a> 创建全景图</h1>
<h2 id="基本流程"><a class="markdownIt-Anchor" href="#基本流程"></a> 基本流程</h2>
<ol>
<li>从同一位置拍摄一系列图像。<strong>光心不动</strong></li>
<li>计算第二个图像与第一个映像之间的变换。</li>
<li>变换第二个图像与第一个图像部分重合</li>
<li>将二者融合在一起创建拼图。</li>
<li>多个图像重复上述过程</li>
</ol>
<img src="/视觉_img/11_1.png" style="zoom:80%">
## 变换矩阵
<img src="/视觉_img/11_2.png" style="zoom:80%">
<img src="/视觉_img/11_3.png" style="zoom:80%">
<p>注：</p>
<ol>
<li>图像平面一般以主点为圆心。</li>
<li>相机1的坐标系为世界坐标系。</li>
</ol>
<h2 id="360全景图"><a class="markdownIt-Anchor" href="#360全景图"></a> 360°全景图</h2>
<p>使用拼图投影球</p>
<img src="/视觉_img/11_4.png" style="zoom:80%">
<p>注：</p>
<ol>
<li>球面坐标：弧长</li>
<li>s为投影球半径</li>
</ol>
<h2 id="装配全景图"><a class="markdownIt-Anchor" href="#装配全景图"></a> 装配全景图</h2>
<ol>
<li>过程：拼接，融合，裁剪</li>
<li>问题：出现漂移</li>
<li>解决</li>
</ol>
<img src="/视觉_img/11_5.png" style="zoom:80%">
<h2 id="图像融合"><a class="markdownIt-Anchor" href="#图像融合"></a> 图像融合</h2>
<ol>
<li>
<p>使用羽化</p>
<ol>
<li>窗口大小影响羽化效果。
<ol>
<li>窗口大小为0和直接拼接一样</li>
<li>良好的窗口应该是平滑且没有虚影的。</li>
</ol>
</li>
</ol>
</li>
<li>
<p>金字塔混合<br />
使用拉普拉斯金子塔在各层次上融合，最终叠加。</p>
<p>拉普拉斯金字塔</p>
 <img src="/视觉_img/11_6.png" style="zoom:80%">
</li>
<li>
<p>Alpha混合<br />
<img src="/视觉_img/11_7.png" style="zoom:80%"></p>
</li>
<li>
<p>泊松图像编辑</p>
</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/9/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        John Doe
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Hexo"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com" target="_blank" rel="noopener">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
  </div>
</body>

</html>