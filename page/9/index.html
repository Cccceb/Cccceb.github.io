<!DOCTYPE html>


<html lang="cn" >


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

  <script type="text/javascript"
	src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
</head>

</html>

<body>
  <div id="app">
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/Bg.png" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/"></a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-视觉第15讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC15%E8%AE%B2/"
    >视觉第15讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC15%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.901Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="运动恢复结构-sfm"><a class="markdownIt-Anchor" href="#运动恢复结构-sfm"></a> 运动恢复结构 SFM</h1>
<ol>
<li>目的：输入一对匹配点的图像坐标，输出这个点的三维坐标及相机内外参数(可能的话)。同时使得目标函数具有最小化重投影误差。</li>
<li>过程：
<ol>
<li>特征检测与匹配</li>
<li>匹配每对图像之间的特征</li>
<li>用 RANSAC 优化匹配以估计各对之间的基本矩阵</li>
</ol>
</li>
</ol>
<h2 id="目标函数"><a class="markdownIt-Anchor" href="#目标函数"></a> 目标函数</h2>
<img src="/视觉_img/15-1.png" style="zoom:80%">
<ol>
<li>目标是使重投影误差平方和最小</li>
<li>P(xi,Rj,tj)表示把Xi这个点投影到第j个相机。</li>
<li>Wij：=1代表三维点在图像中出现了；=0代表没出现。</li>
<li>解不唯一。</li>
</ol>
<h2 id="重复结构问题的解决"><a class="markdownIt-Anchor" href="#重复结构问题的解决"></a> 重复结构问题的解决</h2>
<ol>
<li>预处理：删除不一致的场景图边缘</li>
<li>后处理：识别和更正重复的结构</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第14讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC14%E8%AE%B2/"
    >视觉第14讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC14%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.898Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="极线"><a class="markdownIt-Anchor" href="#极线"></a> 极线</h1>
<img src="/视觉_img/14_2.png" style="zoom:1%">
<ol>
<li>极线：极面与成像平面的交线</li>
</ol>
<h1 id="基本矩阵"><a class="markdownIt-Anchor" href="#基本矩阵"></a> 基本矩阵</h1>
<h2 id="基本矩阵性质"><a class="markdownIt-Anchor" href="#基本矩阵性质"></a> 基本矩阵性质</h2>
<ol>
<li>F将图像1中的点映射到图像2中的极线</li>
<li>Fp是与p对应的极线</li>
<li>F<sup>T</sup>q是与q对应的极线</li>
<li>Fe1=0，F<sup>T</sup>e2=0
<ol>
<li><strong>证明</strong> 比如极线恒过e1，则对于任意的q，e1<sup>T</sup>F1<sup>T</sup>q=0，则e1<sup>T</sup>F1<sup>T</sup>=0</li>
</ol>
</li>
<li>F的秩是2，行列式为0</li>
<li>点p在图2中的极线是:Fp</li>
<li>对应点间<strong>极线约束</strong>为q<sup>T</sup>Fp=0,即匹配点必须在极线上</li>
<li>特殊点e1和e2(极点)：是相机在另一个相机成像平面上的投影。(两个相机互相拍照)</li>
<li>所有极线都通过极点</li>
</ol>
<h2 id="求解基本矩阵-已标定时"><a class="markdownIt-Anchor" href="#求解基本矩阵-已标定时"></a> 求解基本矩阵-已标定时</h2>
<img src="/视觉_img/14_3.png" style="zoom:1%">	
<p>其中</p>
<ol>
<li>ot为baseline</li>
<li>相机1坐标系即世界坐标系</li>
<li>p,q为齐次坐标</li>
<li>旋转矩阵R<sup>-1</sup>=R<sup>T</sup><br />
<img src="/视觉_img/14_4.png" style="zoom:1%"></li>
</ol>
<img src="/视觉_img/14_5.png" style="zoom:1%">
<ol start="3">
<li>与t的叉积可表示为</li>
</ol>
<img src="/视觉_img/14_6.png" style="zoom:1%">
<img src="/视觉_img/14_7.png" style="zoom:1%">
<ol start="4">
<li>求得本质矩阵E</li>
</ol>
<img src="/视觉_img/14_8.png" style="zoom:1%">
<ol start="5">
<li>求得基本矩阵F</li>
</ol>
<img src="/视觉_img/14_9.png" style="zoom:1%">	
<h2 id="估计基本矩阵"><a class="markdownIt-Anchor" href="#估计基本矩阵"></a> 估计基本矩阵</h2>
<p>在不知道K1,K2,R或t的情况下估计F</p>
<h3 id="8点算法"><a class="markdownIt-Anchor" href="#8点算法"></a> 8点算法</h3>
<ol>
<li>
<p>求解思路<br />
对于每对匹配点，由x’<sup>T</sup>Fx=0</p>
 <img src="/视觉_img/14_10.png" style="zoom:1%">	
<p>将问题转换成求解让det(Af)最小化的f,其解为A<sup>T</sup>A的最小特征向量。</p>
</li>
<li>
<p>问题</p>
<ol>
<li>不能保证F的秩是2</li>
</ol>
</li>
<li>
<p>解决</p>
<ol>
<li>因此应将F换成F’，F’的秩为2，且是|F-F’|最小化</li>
</ol>
 <img src="/视觉_img/14_11.png" style="zoom:1%">
</li>
<li>
<p>8点算法：</p>
<ol>
<li><strong>优点</strong> 是线性的，易于实现且速度快</li>
<li><strong>缺点</strong> 易受噪声影响，当各列间数量级差别较大的时候，最小二乘法得到不良解。</li>
</ol>
</li>
</ol>
<h2 id="归一化的8点算法"><a class="markdownIt-Anchor" href="#归一化的8点算法"></a> 归一化的8点算法</h2>
<p>将图像变换到[-1,1]×[-1,1]</p>
<img src="/视觉_img/14_12.png" style="zoom:1%">
<img src="/视觉_img/14_13.png" style="zoom:1%">
<p>其中T为归一化矩阵</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第13讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC13%E8%AE%B2/"
    >视觉第13讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC13%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.895Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="极几何"><a class="markdownIt-Anchor" href="#极几何"></a> 极几何</h1>
<h2 id="基本的立体图算法"><a class="markdownIt-Anchor" href="#基本的立体图算法"></a> 基本的立体图算法</h2>
<img src="/视觉_img/13_1.png" style="zoom:1%">
<p>对于左图中每个像素，在右图同一个极线上选择最小匹配成本的像素。</p>
<ol>
<li>用SSD衡量成本</li>
<li>匹配窗口：大窗口粒度粗，小窗口更加精细，但是噪声多。</li>
</ol>
<h2 id="能量最小化求解立体视觉"><a class="markdownIt-Anchor" href="#能量最小化求解立体视觉"></a> 能量最小化求解立体视觉</h2>
<ol>
<li>目标
<ol>
<li>匹配质量：希望每个像素在其他图像中找到一个好的匹配项</li>
<li>平滑：如果两个像素相邻，他们的应该平移大约相同的量</li>
</ol>
</li>
</ol>
<h3 id="贪心匹配"><a class="markdownIt-Anchor" href="#贪心匹配"></a> 贪心匹配</h3>
<ol start="2">
<li>
<p>定义能量函数E(d)</p>
 <img src="/视觉_img/13_2.png" style="zoom:1%">
<ol>
<li>现在要找一个平移量映射D，最大限度的减少一个能量函数E(d)</li>
<li>独立的选择每一列的最小值d(x,y)=argmin C(x,y,d’)</li>
</ol>
</li>
</ol>
<h3 id="改进目标函数"><a class="markdownIt-Anchor" href="#改进目标函数"></a> 改进目标函数</h3>
<img src="/视觉_img/13_3.png" style="zoom:1%">
<p>其中</p>
<img src="/视觉_img/13_4.png" style="zoom:1%">
<p>对于平滑成本，v的选择很多</p>
<img src="/视觉_img/13_5.png" style="zoom:1%">
<ol>
<li>
<p>一维动态规划</p>
<ol>
<li>
<p>对每条扫描线使用动态规划方法独立求解</p>
</li>
<li>
<p>以增量方式构建成本函数D</p>
 <img src="/视觉_img/13_6.png" style="zoom:1%">
</li>
</ol>
</li>
<li>
<p>二维动态规划</p>
 <img src="/视觉_img/13_7.png" style="zoom:1%">
<ol>
<li>不能用二维动态规划求解，因为dx,y-1和 dx-1,y可能取决于 dx-1,y-1 的不同值</li>
<li>2D有许多局部极小值</li>
<li>以及一个大的搜索群空间</li>
<li>好的方法是马尔可夫随机场</li>
</ol>
</li>
</ol>
<h1 id="通过视差求深度"><a class="markdownIt-Anchor" href="#通过视差求深度"></a> 通过视差求深度</h1>
<img src="/视觉_img/13_8.png" style="zoom:1%">
<ol>
<li>baseline 极线，平行于成像平面</li>
<li>X是物体</li>
<li>x和x’是向量</li>
<li>(baseline-(x-x’))/baseline=z-f/z</li>
<li>z为深度</li>
</ol>
<h1 id="立体重建"><a class="markdownIt-Anchor" href="#立体重建"></a> 立体重建</h1>
<h2 id="过程"><a class="markdownIt-Anchor" href="#过程"></a> 过程</h2>
<ol>
<li>标定摄像机：标定内外参数</li>
<li>校正图像：将两个图像放到同一个平面上，且平行于baseline</li>
<li>计算平移量</li>
<li>估计深度</li>
</ol>
<h2 id="由结构光主动获得立体图"><a class="markdownIt-Anchor" href="#由结构光主动获得立体图"></a> 由结构光主动获得立体图</h2>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第12讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC12%E8%AE%B2/"
    >视觉第12讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC12%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.893Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="点和线"><a class="markdownIt-Anchor" href="#点和线"></a> 点和线</h1>
<h2 id="点和线的对偶性"><a class="markdownIt-Anchor" href="#点和线的对偶性"></a> 点和线的对偶性</h2>
<img src="/视觉_img/12_1.png" style="zoom:70%">
<ol>
<li>对于线上的每一点P,有I·P=0	（面上一点同理）</li>
<li>由射线P1和P2决定的线I,有I=P1×P2</li>
<li>两条线I1和I2的交点P，有P=I1×I2</li>
</ol>
<h2 id="理想的点和线"><a class="markdownIt-Anchor" href="#理想的点和线"></a> 理想的点和线</h2>
<img src="/视觉_img/12_2.png" style="zoom:70%">
<ol>
<li>
<p>理想点（无穷远点）</p>
<ol>
<li>P(x,y,0)平行于图像平面</li>
<li>有无限的图像坐标</li>
</ol>
</li>
<li>
<p>理想线</p>
<ol>
<li>I(a,b,0)平行于图像平面</li>
<li>对应于图像平面过主点的一条线</li>
<li>由ax+by=0组成的线</li>
</ol>
</li>
</ol>
<h2 id="面和点的对偶性"><a class="markdownIt-Anchor" href="#面和点的对偶性"></a> 面和点的对偶性</h2>
<ol>
<li>一个平面可以用四维向量表示</li>
<li>点和平面是对偶的：N·P=0</li>
<li>三点定义一个平面，三个平面定义一个点</li>
</ol>
<h1 id="透视投影"><a class="markdownIt-Anchor" href="#透视投影"></a> 透视投影</h1>
<img src="/视觉_img/12_3.png" style="zoom:40%">
<h2 id="消失点-1d"><a class="markdownIt-Anchor" href="#消失点-1d"></a> 消失点 1D</h2>
<img src="/视觉_img/12_4.png" style="zoom:40%">
<ol>
<li>消失点：
<ol>
<li>是无穷处一个点的投影</li>
<li>通常投影到图像中的一个有限点</li>
</ol>
</li>
</ol>
<h2 id="消失点-2d"><a class="markdownIt-Anchor" href="#消失点-2d"></a> 消失点 2D</h2>
<img src="/视觉_img/12_5.png" style="zoom:40%">
## 消失点 3D
<img src="/视觉_img/12_6.png" style="zoom:40%">
<ol>
<li>特性
<ol>
<li>任意两条平行线都有相同的消失点V</li>
<li>从光心C通过消失点V的射线与那些平行线平行</li>
<li>图像可能有多个消失点</li>
</ol>
</li>
</ol>
<h2 id="消失线"><a class="markdownIt-Anchor" href="#消失线"></a> 消失线</h2>
<img src="/视觉_img/12_7.png" style="zoom:40%">
<ol>
<li>平面上任意一组平行线都定义一个消失点</li>
<li>消失点的联合就是消失线(地平线)</li>
<li>不同平面可以定义不同的消失线</li>
</ol>
<h2 id="计算消失点"><a class="markdownIt-Anchor" href="#计算消失点"></a> 计算消失点</h2>
<img src="/视觉_img/12_8.png" style="zoom:40%">
<p>v = ΠP<sub>∞</sub></p>
<ol>
<li>
<p>解释：</p>
<ol>
<li>先得到一条射线Px，其中t是一个自由变化的系数，D是方向向量</li>
<li>将t-&gt;∞代入，得到P<sub>∞</sub></li>
<li>将P<sub>∞</sub>投影到成像平面</li>
</ol>
</li>
<li>
<p>特性：</p>
<ol>
<li>P<sub>∞</sub> 是无穷远处的一个点，v是其投影</li>
<li>仅取决于线的方向</li>
<li>平行线P<sub>0</sub>+tD和P<sub>1</sub>+tD相交于P<sub>∞</sub></li>
</ol>
</li>
<li>
<img src="/视觉_img/12_10.png" style="zoom:40%">
</li>
</ol>
<h2 id="计算消失线"><a class="markdownIt-Anchor" href="#计算消失线"></a> 计算消失线</h2>
<img src="/视觉_img/12_9.png" style="zoom:40%">
<p>作平行于地面平面且过C的平面与投影平面的交线。</p>
<ol>
<li>特性
<ol>
<li>I是通过C的水平平面与图像平面的交集</li>
<li>可以通过地面平面上的两组平行线计算I</li>
<li>所有与光心C同样高度的点投影到I上</li>
<li>提供了比较场景中对象高度的方法</li>
</ol>
</li>
</ol>
<h1 id="通过参照物测量高度"><a class="markdownIt-Anchor" href="#通过参照物测量高度"></a> 通过参照物测量高度</h1>
<ol>
<li>
<p>交叉比—射影不变量</p>
 <img src="/视觉_img/12_11.png" style="zoom:40%">
</li>
<li>
<p>测量高度</p>
 <img src="/视觉_img/12_12.png" style="zoom:40%">
</li>
<li>
<p>实际</p>
 <img src="/视觉_img/12_13.png" style="zoom:40%"></li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第11讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC11%E8%AE%B2/"
    >视觉第11讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC11%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.890Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="创建全景图"><a class="markdownIt-Anchor" href="#创建全景图"></a> 创建全景图</h1>
<h2 id="基本流程"><a class="markdownIt-Anchor" href="#基本流程"></a> 基本流程</h2>
<ol>
<li>从同一位置拍摄一系列图像。<strong>光心不动</strong></li>
<li>计算第二个图像与第一个映像之间的变换。</li>
<li>变换第二个图像与第一个图像部分重合</li>
<li>将二者融合在一起创建拼图。</li>
<li>多个图像重复上述过程</li>
</ol>
<img src="/视觉_img/11_1.png" style="zoom:80%">
## 变换矩阵
<img src="/视觉_img/11_2.png" style="zoom:80%">
<img src="/视觉_img/11_3.png" style="zoom:80%">
<p>注：</p>
<ol>
<li>图像平面一般以主点为圆心。</li>
<li>相机1的坐标系为世界坐标系。</li>
</ol>
<h2 id="360全景图"><a class="markdownIt-Anchor" href="#360全景图"></a> 360°全景图</h2>
<p>使用拼图投影球</p>
<img src="/视觉_img/11_4.png" style="zoom:80%">
<p>注：</p>
<ol>
<li>球面坐标：弧长</li>
<li>s为投影球半径</li>
</ol>
<h2 id="装配全景图"><a class="markdownIt-Anchor" href="#装配全景图"></a> 装配全景图</h2>
<ol>
<li>过程：拼接，融合，裁剪</li>
<li>问题：出现漂移</li>
<li>解决</li>
</ol>
<img src="/视觉_img/11_5.png" style="zoom:80%">
<h2 id="图像融合"><a class="markdownIt-Anchor" href="#图像融合"></a> 图像融合</h2>
<ol>
<li>
<p>使用羽化</p>
<ol>
<li>窗口大小影响羽化效果。
<ol>
<li>窗口大小为0和直接拼接一样</li>
<li>良好的窗口应该是平滑且没有虚影的。</li>
</ol>
</li>
</ol>
</li>
<li>
<p>金字塔混合<br />
使用拉普拉斯金子塔在各层次上融合，最终叠加。</p>
<p>拉普拉斯金字塔</p>
 <img src="/视觉_img/11_6.png" style="zoom:80%">
</li>
<li>
<p>Alpha混合<br />
<img src="/视觉_img/11_7.png" style="zoom:80%"></p>
</li>
<li>
<p>泊松图像编辑</p>
</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第10讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC10%E8%AE%B2/"
    >视觉第10讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC10%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.887Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="相机成像原理"><a class="markdownIt-Anchor" href="#相机成像原理"></a> 相机成像原理</h1>
<ol>
<li>为什么不使光圈尽可能小?<br />
（1）使光线减少 （2）衍射影响</li>
<li>人的眼睛：瞳孔相当于光圈；视网膜上的感光细胞相当于胶片。</li>
</ol>
<h2 id="相机模型"><a class="markdownIt-Anchor" href="#相机模型"></a> 相机模型</h2>
<ol>
<li>
<p>投影建模</p>
 <img src="/视觉_img/10_1.png" style="zoom:80%">
 1. 将相机近似为针孔模型
 2. 把小孔的位置设在原点
 3. 将图像平面放在投影中心COP的前面(为了得到正立的相)
 4. 相机向负z轴看去(右手坐标系下)
</li>
<li>
<p>投影方程</p>
 <img src="/视觉_img/10_2.png" style="zoom:80%">
<ol>
<li>
<p>不是线性变换----&gt;采用3D齐次坐标。</p>
 <img src="/视觉_img/10_3.png" style="zoom:80%">
</li>
</ol>
</li>
<li>
<p>透视投影</p>
<ol>
<li>
<p>投影是使用齐次坐标的矩阵乘法：</p>
 <img src="/视觉_img/10_4.png" style="zoom:80%">
</li>
<li>
<p>改变投影变换的吃尺度对变换没有影响</p>
 <img src="/视觉_img/10_5.png" style="zoom:80%">
</li>
</ol>
</li>
<li>
<p>正交投影（平行投影）</p>
<ol>
<li>
<p>是透视投影的特殊情况：当光学中心COP到投影平面PP的距离是无限的时候。（1/d = 0）</p>
 <img src="/视觉_img/10_6.png" style="zoom:80%">
</li>
</ol>
</li>
</ol>
<h2 id="正交投影的变体"><a class="markdownIt-Anchor" href="#正交投影的变体"></a> 正交投影的变体</h2>
<ol start="5">
<li>
<p>缩放正交（弱透视）</p>
<p>相当于在物体聚焦到角点前就将图像截获。</p>
 <img src="/视觉_img/10_7.png" style="zoom:80%">
<p>分两步:</p>
<ol>
<li>第一步：整个物体按平行于光轴的方向正交投影到经过物体质心并与图像平面平行的平面上。</li>
<li>第二步：再按透视模型投影到图像平面上，这一步实际是全局的缩放。</li>
</ol>
</li>
<li>
<p>仿射投影</p>
 <img src="/视觉_img/10_8.png" style="zoom:80%">
<p>分两步：</p>
<ol>
<li>仍把物体平行投影到过质心且与图象平面平行的平面上，不过这次的投影线不是平行于光轴，而是平行于光心C和物体质心G的连线CG；</li>
<li>再按透视模型投影到图象平面上。</li>
</ol>
</li>
<li>
<p>总结</p>
</li>
</ol>
<img src="/视觉_img/10_9.png" style="zoom:80%">
<h2 id="降维"><a class="markdownIt-Anchor" href="#降维"></a> 降维</h2>
<ol>
<li>
<p>投影属性</p>
<ol>
<li>多对一：同一光线上的所有点映射到图像中的同一点。</li>
<li>点-&gt;点，线-&gt;线（通过角点的线变成一个点）</li>
<li>平面-&gt;平面（通过角点的平面变成一条线）</li>
<li>平行线在消失点汇合
<ol>
<li>每个方向在空间中都有他自己的消失点，但平行于图像平面的平行线保持平行。</li>
</ol>
</li>
</ol>
 <img src="/视觉_img/10_10.png" style="zoom:80%">
</li>
</ol>
<h2 id="相机参数"><a class="markdownIt-Anchor" href="#相机参数"></a> 相机参数</h2>
<p>现在我们要将世界坐标系中的一个点投影到相机坐标系中。我们需要知道相机在世界坐标系中的位置和方向。然后透视投影到图像平面上以获得像素坐标。</p>
<ol>
<li>
<p>相机内参数</p>
<ol>
<li>从世界坐标系原点到光心COP的平移变换T</li>
<li>描述相机方向的旋转变换R</li>
<li>焦距f、主点(x,y)、像素大小（sx,sy）</li>
</ol>
</li>
<li>
 <img src="/视觉_img/10_11.png" style="zoom:80%">
<p>·</p>
<p>·</p>
 <img src="/视觉_img/10_12.png" style="zoom:80%">
<p>这个公式要从右向左看</p>
<ol>
<li>平移矩阵即是将相机原点与世界原点重合。</li>
<li>第二步旋转，是将相机坐标系的三个轴旋转到与世界坐标系坐标轴平行。</li>
<li>第三步是将世界坐标系中的三维点透过光心进行投影。</li>
<li>第四步是使用相机内参数将图像变成离散的坐标。</li>
<li><strong>注意</strong> 该公式中对投影变换进行了拆分，，一部分与内参数乘在了一起。</li>
</ol>
</li>
</ol>
<h2 id="外参数让相机规范化"><a class="markdownIt-Anchor" href="#外参数让相机规范化"></a> 外参数—让相机规范化</h2>
<ol>
<li>
<p>第一步 平移-c，将相机坐标系原点与世界坐标系原点重合。<br />
<img src="/视觉_img/10_15.png" style="zoom:80%"></p>
<p>其中c为相机坐标原点在世界坐标系中的坐标[[tx,ty,tz]].T</p>
</li>
<li>
<p>第二步 旋转R， 将相机坐标系的轴旋转到与世界坐标系轴平行。</p>
 <img src="/视觉_img/10_16.png" style="zoom:80%">
</li>
</ol>
<h2 id="透视投影"><a class="markdownIt-Anchor" href="#透视投影"></a> 透视投影</h2>
<img src="/视觉_img/10_17.png" style="zoom:80%">
<h2 id="投影矩阵"><a class="markdownIt-Anchor" href="#投影矩阵"></a> 投影矩阵</h2>
<img src="/视觉_img/10_18.png" style="zoom:80%">
<p><strong>注：</strong></p>
<ol>
<li>
<p>平移的三个参数是相机原点在世界坐标系中的坐标。</p>
</li>
<li>
<p>旋转的三个参数是相机坐标系的坐标轴在用世界坐标系的方向向量来表达的向量坐标的转置。</p>
</li>
<li>
<p><strong>将投影矩阵乘开</strong></p>
</li>
</ol>
<img src="/视觉_img/10_19.png" style="zoom:80%">
<img src="/视觉_img/10_13.png" style="zoom:80%">
<h2 id="透视失真"><a class="markdownIt-Anchor" href="#透视失真"></a> 透视失真</h2>
<ol>
<li>梯形失真</li>
<li>仰拍导致。解决：移轴镜头</li>
<li>外侧列更大</li>
<li>镜头失真：枕型，桶型–&gt;由不完美镜头引起</li>
<li><strong>修正径向畸变</strong><br />
<img src="/视觉_img/10_14.png" style="zoom:80%"></li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第9讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC9%E8%AE%B2/"
    >视觉第9讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC9%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.883Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="随机抽样一致"><a class="markdownIt-Anchor" href="#随机抽样一致"></a> 随机抽样一致</h1>
<p>针对最小二乘法出现的离群点问题</p>
<ol>
<li>思路
<ol>
<li>先求得一条候选直线</li>
<li>计算与该直线的内群点</li>
<li>对于所有候选直线，选择内群点最多的那一条。</li>
</ol>
</li>
<li>RANSAC算法
<ol>
<li>
<p>思想：所有的内点将在平移向量上达成一致；少部分离群点彼此矛盾。</p>
</li>
<li>
<p>RANSAC只能在离群点少于50%时才能保证正确解。</p>
</li>
<li>
<p>衡量内点：通过阈值过滤</p>
<p>阈值与噪声量有关，通常噪声建模为高斯噪声，标准差为3个像素。</p>
<p>通过设置阈值，使高斯分布中95%的比例位于半径内。</p>
</li>
<li>
<p>算法完整过程</p>
<ol>
<li>
<p>随机选择s个样本点</p>
<p>通常s=可求解模型的最少样本点数</p>
</li>
<li>
<p>根据样本得到一个解</p>
</li>
<li>
<p>计算内点数</p>
</li>
<li>
<p>重复N次</p>
</li>
<li>
<p>选择具有最多内点的模型。</p>
</li>
<li>
<p>计算所有内点的平均平移向量。</p>
</li>
</ol>
</li>
<li>
<p>实验轮数</p>
 <img src="/视觉_img/9_1.png " style="zoom:80%">
<p>其中p为内点概率；s是每次实验使用的样本点数目；P为能最终找到正确解的概率；R为实验轮次</p>
</li>
<li>
<p>s的取值<br />
为自由度/2下取整</p>
 <img src="/视觉_img/9_2.png " style="zoom:80%">
</li>
<li>
<p>优点</p>
<ol>
<li>简单，通用</li>
<li>适用于许多不同的问题</li>
<li>实践中表现良好，通常比蛮力取样要好</li>
</ol>
</li>
<li>
<p>缺点：</p>
<ol>
<li>需要调整参数</li>
<li>有时需要大量迭代，耗费时间</li>
<li>内点概率极低时可能失败</li>
</ol>
</li>
</ol>
</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第8讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC8%E8%AE%B2/"
    >视觉第8讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC8%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.881Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="图像配准"><a class="markdownIt-Anchor" href="#图像配准"></a> 图像配准</h1>
<p>问题：给定图像A和B之间的一组匹配项，如何计算从A到B的变换T？</p>
<ol>
<li>
<p>对于平移</p>
<ol>
<li>最简单的取n对匹配的移动平均值值<br />
<img src="/视觉_img/8_1.png" style = "zoom:80%" /></li>
<li>通过线性方程组求解
<ol>
<li>问题：对于n对匹配点，有2两个未知数和2n个方程–&gt;最小二乘法。</li>
<li>最小二乘法
<ol>
<li>
<p>最小二乘法公式</p>
 <img src="/视觉_img/8_2.png" style = "zoom:80%"/>
</li>
<li>
<p>矩阵形式</p>
 <img src="/视觉_img/8_3.png" style = "zoom:80%"/>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>对于仿射变化</p>
<ol>
<li>
<p>有6个未知数</p>
 <img src="/视觉_img/8_4.png" style = "zoom:80%"/>
</li>
</ol>
</li>
<li>
<p>对于同态映射（单应映射）</p>
<ol>
<li>有8个未知数，至少需要4个匹配对。</li>
</ol>
 <img src="/视觉_img/8_5.png" style = "zoom:80%"/>
 <img src="/视觉_img/8_6.png" style = "zoom:80%"/>
 <img src="/视觉_img/8_7.png" style = "zoom:80%"/>
</li>
<li>
<p>图像配准过程</p>
<ol>
<li>计算A和B的特征</li>
<li>匹配A和B之间的特征</li>
<li>使用匹配集计算A到B单应映射矩阵的最小二乘解。</li>
</ol>
</li>
<li>
<p>离群点（外点）</p>
</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第7讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC7%E8%AE%B2/"
    >视觉第7讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC7%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.877Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="图像卷绕"><a class="markdownIt-Anchor" href="#图像卷绕"></a> 图像卷绕</h1>
<p>卷绕&amp;滤波：</p>
<p>滤波改变图像的值域</p>
<p>&lt;img src=&quot;/视觉_img/7-1.png&quot;style=“zoom:1%”&gt;</p>
<p>卷绕改变图像的定义域</p>
<p>&lt;img src=&quot;/视觉_img/7-2.png&quot;style=“zoom:1%”&gt;</p>
<h2 id="线性变换"><a class="markdownIt-Anchor" href="#线性变换"></a> 线性变换</h2>
<ol>
<li>
<p>缩放</p>
<p>&lt;img src=&quot;/视觉_img/7-3.png&quot;style=“zoom:1%”&gt;</p>
</li>
<li>
<p>旋转</p>
<p>&lt;img src=&quot;/视觉_img/7-4.png&quot;style=“zoom:1%”&gt;</p>
<ol>
<li>R<sup>-1</sup>=R<sup>T</sup></li>
</ol>
</li>
<li>
<p>镜像</p>
<ol>
<li>
<p>关于Y轴镜像</p>
<p>&lt;img src=&quot;/视觉_img/7-5.png&quot;style=“zoom:1%”&gt;</p>
</li>
<li>
<p>关于y=x镜像</p>
<p>&lt;img src=&quot;/视觉_img/7-6.png&quot;style=“zoom:1%”&gt;</p>
</li>
</ol>
</li>
<li>
<p>剪切</p>
</li>
<li>
<p>性质：</p>
<ol>
<li>原点映射到原点</li>
<li>直线映射到直线</li>
<li>平行线保持平行</li>
<li>保持比率</li>
<li>线性变换的组合仍然是线性变换。</li>
</ol>
</li>
</ol>
<h2 id="非线性变换仿射变换"><a class="markdownIt-Anchor" href="#非线性变换仿射变换"></a> 非线性变换–仿射变换</h2>
<p>&lt;img src=&quot;/视觉_img/7-8.png&quot;style=“zoom:1%”&gt;</p>
<p>方式变换是线性变换和平移变换的组合</p>
<ol>
<li>
<p>基本仿射变换</p>
<p>&lt;img src=&quot;/视觉_img/7-7.png&quot;style=“zoom:1%”&gt;</p>
</li>
<li>
<p>仿射变换的性质</p>
<ol>
<li>原点不一定映射到原点</li>
<li>直线映射到直线</li>
<li>平行线保持平行</li>
<li>保持比率</li>
<li>仿射变换的组合仍然是仿射变换</li>
</ol>
</li>
</ol>
<h2 id="投影变换透视变换单应映射"><a class="markdownIt-Anchor" href="#投影变换透视变换单应映射"></a> 投影变换(透视变换/单应映射)</h2>
<p>&lt;img src=&quot;/视觉_img/7-9.png&quot;style=“zoom:1%”&gt;</p>
<ol>
<li>8个自由度</li>
<li>投影变换的属性
<ol start="2">
<li>
<p>保直线</p>
</li>
<li>
<p>原点不一定映射到原点</p>
</li>
<li>
<p>不保平行</p>
</li>
<li>
<p>不保比率</p>
</li>
<li>
<p>投影的组合仍然是投影变换</p>
</li>
</ol>
</li>
</ol>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>&lt;img src=&quot;/视觉_img/7-10.png&quot;style=“zoom:1%”&gt;</p>
<h1 id="实现图像卷绕"><a class="markdownIt-Anchor" href="#实现图像卷绕"></a> 实现图像卷绕</h1>
<h2 id="前向卷绕"><a class="markdownIt-Anchor" href="#前向卷绕"></a> 前向卷绕</h2>
<p>将每个像素f (x,y)复制到g图中对应位置(x’,y’) = T(x,y)</p>
<ol>
<li>如果(x’,y’)不是整数，则将像素值分配给四个最近邻，记录每个点的权重并在最后归一化。</li>
<li><strong>问题</strong> 可能有空洞，效果是混叠与模糊</li>
</ol>
<h2 id="反向卷绕"><a class="markdownIt-Anchor" href="#反向卷绕"></a> 反向卷绕</h2>
<p>获取每个像素g(x’, y’) 在原图像中对应的位 置 (x, y) = T<sup>-1</sup>(x’<br />
, y’) 处的像素值f(x, y)</p>
<ol>
<li>如果(x,y)不是整数，则f(x,y)的颜色值通过原图像中邻域的插值获得，且可以使用滤波器来控制混叠。</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-视觉第6讲" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC6%E8%AE%B2/"
    >视觉第6讲</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/30/%E8%A7%86%E8%A7%89%E7%AC%AC6%E8%AE%B2/" class="article-date">
  <time datetime="2020-03-30T03:17:13.874Z" itemprop="datePublished">2020-03-30</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="特征描述符"><a class="markdownIt-Anchor" href="#特征描述符"></a> 特征描述符</h1>
<ol>
<li>性质：
<ol>
<li>不变性：图像被变换，描述符应该不变</li>
<li>区分力：每个点的描述符是高度唯一的</li>
</ol>
</li>
</ol>
<h2 id="实现不变性"><a class="markdownIt-Anchor" href="#实现不变性"></a> 实现不变性</h2>
<ol>
<li>确保检测器是不变的</li>
<li>设计不变的特征描述符</li>
</ol>
<h2 id="旋转不变性"><a class="markdownIt-Anchor" href="#旋转不变性"></a> 旋转不变性</h2>
<p>通过寻找图像块的主导方向实现，主导方向为<br />
1. H的特征向量Xmax对应的λmax<br />
2. 梯度方向</p>
<h2 id="mops"><a class="markdownIt-Anchor" href="#mops"></a> MOPS</h2>
<ol>
<li><strong>步骤</strong>：
<ol>
<li>选出特征点周围40×40的窗口</li>
<li>缩放到1/5大小</li>
<li>旋转至水平</li>
<li>在以特征为中心的8×8窗口内采样</li>
<li>规格化：强度减去平均值除以标准差，使之均值为0，方差为1。</li>
</ol>
</li>
</ol>
<h2 id="sift"><a class="markdownIt-Anchor" href="#sift"></a> SIFT</h2>
<ol>
<li>
<p><strong>步骤</strong></p>
<ol>
<li>取特征周围16×16的窗口，划分为4×4单元格</li>
<li>为每个像素计算边缘方向(梯度方向-90°)</li>
<li>通过梯度幅值阈值去除弱的边缘</li>
<li>为剩余边缘<strong>方向</strong>建立直方图，得到16个单元格×8方向=128维描述符</li>
<li>将该128维描述符归一化到单位长度</li>
</ol>
</li>
<li>
<p>性质：</p>
<ol>
<li>可以处理视角变化</li>
<li>适应光照变化</li>
<li>快速高效</li>
</ol>
</li>
</ol>
<h1 id="特征匹配"><a class="markdownIt-Anchor" href="#特征匹配"></a> 特征匹配</h1>
<p>想找到最佳匹配</p>
<ol>
<li>定义距离函数来比较两个描述符</li>
<li>测试I2中所有的特征，找出距离最小的一个。</li>
</ol>
<h2 id="特征距离"><a class="markdownIt-Anchor" href="#特征距离"></a> 特征距离</h2>
<ol>
<li>定义为||f1-f2||
<ol>
<li><strong>问题</strong> 可能对不正确匹配给出小的距离。</li>
<li><strong>解决</strong> 定义距离比= ||f1-f2||/||f1-f2’||
<ol>
<li>f2是f1在I2中最好的SSD匹配</li>
<li>f2’是f1在I2中次好的SSD匹配</li>
<li>距离比可以对不正确的匹配给出较大的值，用阈值过滤即可。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="结果评估"><a class="markdownIt-Anchor" href="#结果评估"></a> 结果评估</h1>
<ol>
<li>最大化真阳性，最小化假阳性</li>
</ol>
<h2 id="roc-曲线"><a class="markdownIt-Anchor" href="#roc-曲线"></a> Roc 曲线</h2>
<img src="/视觉_img/6-1.png" style="zoom:1%">
<img src="/视觉_img/6-2.png" style="zoom:1%">
1. AUC:一个正例，一个负例，预测为正的概率值比负的概率值还要大的可能性。

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hide/" rel="tag">hide</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/8/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/10/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        CuiEnbo
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt=""></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['', '', ''],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: false
    });
  } catch (err) {
  }

</script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
  </div>
</body>

</html>